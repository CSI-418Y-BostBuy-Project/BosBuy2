{"ast":null,"code":"var _jsxFileName = \"/Users/nicholasfarinacci/Desktop/ICSI418Y/BosBuy/client/src/Checkout.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { useCart } from './CartContext'; // Ensure this path is correct\nimport { useAuth } from './UserContext'; // If user context holds authentication and user info\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Checkout = () => {\n  _s();\n  var _authState$user3, _authState$user4;\n  const navigate = useNavigate();\n  const {\n    cartItems,\n    clearCart\n  } = useCart();\n  const {\n    authState\n  } = useAuth();\n  const [cards, setCards] = useState([]);\n  const [selectedCard, setSelectedCard] = useState('');\n  useEffect(() => {\n    var _authState$user;\n    axios.get(`http://localhost:9000/getCards/${(_authState$user = authState.user) === null || _authState$user === void 0 ? void 0 : _authState$user._id}`).then(response => {\n      var _authState$user2, _response$data$cards$;\n      setCards(response.data.cards);\n      setSelectedCard(((_authState$user2 = authState.user) === null || _authState$user2 === void 0 ? void 0 : _authState$user2.defaultCard) || ((_response$data$cards$ = response.data.cards[0]) === null || _response$data$cards$ === void 0 ? void 0 : _response$data$cards$._id));\n    }).catch(error => console.error('Failed to fetch cards:', error));\n  }, [(_authState$user3 = authState.user) === null || _authState$user3 === void 0 ? void 0 : _authState$user3._id, (_authState$user4 = authState.user) === null || _authState$user4 === void 0 ? void 0 : _authState$user4.defaultCard]);\n  const handlePayment = async () => {\n    if (!cartItems.length) {\n      alert('Your cart is empty.');\n      return;\n    }\n\n    // Placeholder for payment process\n    console.log('Processing payment with card ID:', selectedCard);\n\n    // Simulate payment success\n    alert('Payment successful!');\n    clearCart();\n    navigate('/');\n  };\n  const totalSum = cartItems.reduce((acc, item) => acc + item.price * item.quantity, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: cartItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [item.name, \" - \", item.quantity, \" x $\", item.price.toFixed(2), \" = $\", (item.quantity * item.price).toFixed(2)]\n      }, item._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Total: $\", totalSum.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: selectedCard,\n      onChange: e => setSelectedCard(e.target.value),\n      children: cards.map(card => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: card._id,\n        children: [card.cardName, \" -- Expires on \", card.expirationDate]\n      }, card._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayment,\n      children: \"Pay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n};\n_s(Checkout, \"ENFVu3+OK6HiroZv4tSELX5JFQ4=\", false, function () {\n  return [useNavigate, useCart, useAuth];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","useCart","useAuth","jsxDEV","_jsxDEV","Checkout","_s","_authState$user3","_authState$user4","navigate","cartItems","clearCart","authState","cards","setCards","selectedCard","setSelectedCard","_authState$user","get","user","_id","then","response","_authState$user2","_response$data$cards$","data","defaultCard","catch","error","console","handlePayment","length","alert","log","totalSum","reduce","acc","item","price","quantity","children","fileName","_jsxFileName","lineNumber","columnNumber","map","name","toFixed","value","onChange","e","target","card","cardName","expirationDate","onClick","_c","$RefreshReg$"],"sources":["/Users/nicholasfarinacci/Desktop/ICSI418Y/BosBuy/client/src/Checkout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { useCart } from './CartContext'; // Ensure this path is correct\nimport { useAuth } from './UserContext'; // If user context holds authentication and user info\n\nconst Checkout = () => {\n    const navigate = useNavigate();\n    const { cartItems, clearCart } = useCart();\n    const { authState } = useAuth();\n    const [cards, setCards] = useState([]);\n    const [selectedCard, setSelectedCard] = useState('');\n\n    useEffect(() => {\n        axios.get(`http://localhost:9000/getCards/${authState.user?._id}`)\n            .then(response => {\n                setCards(response.data.cards);\n                setSelectedCard(authState.user?.defaultCard || (response.data.cards[0]?._id));\n            })\n            .catch(error => console.error('Failed to fetch cards:', error));\n    }, [authState.user?._id, authState.user?.defaultCard]);\n\n    const handlePayment = async () => {\n        if (!cartItems.length) {\n            alert('Your cart is empty.');\n            return;\n        }\n\n        // Placeholder for payment process\n        console.log('Processing payment with card ID:', selectedCard);\n\n        // Simulate payment success\n        alert('Payment successful!');\n        clearCart();\n        navigate('/');\n    };\n\n    const totalSum = cartItems.reduce((acc, item) => acc + (item.price * item.quantity), 0);\n\n    return (\n        <div>\n            <h1>Checkout</h1>\n            <ul>\n                {cartItems.map(item => (\n                    <li key={item._id}>\n                        {item.name} - {item.quantity} x ${item.price.toFixed(2)} = ${(item.quantity * item.price).toFixed(2)}\n                    </li>\n                ))}\n            </ul>\n            <h2>Total: ${totalSum.toFixed(2)}</h2>\n            <select value={selectedCard} onChange={e => setSelectedCard(e.target.value)}>\n                {cards.map(card => (\n                    <option key={card._id} value={card._id}>{card.cardName} -- Expires on {card.expirationDate}</option>\n                ))}\n            </select>\n            <button onClick={handlePayment}>Pay</button>\n        </div>\n    );\n};\n\nexport default Checkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}